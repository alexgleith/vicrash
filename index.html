<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Road crashes across Victoria.">
    <meta name="author" content="Alex Leith">

    <title>ViCrash - a map by Alex Leith</title>

    <!-- Bootstrap Core CSS and cartodb -->
    <link href="css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="http://libs.cartocdn.com/cartodb.js/v3/themes/css/cartodb.css" />

    <!-- Custom CSS -->
    <link href="css/blog-post.css" rel="stylesheet">

    <link href="css/bootstrap-slider.min.css" rel="stylesheet">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="js/html5shiv.js"></script>
        <script src="js/rrespond.min.js"></script>
    <![endif]-->

</head>

<body>
    <!-- Navigation -->
    <nav class="navbar navbar-inverse navbar-fixed-top">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="#">ViCrash</a>
        </div>
        <div id="navbar" class="collapse navbar-collapse">
          <ul class="nav navbar-nav">
          	<li><a href="#aboutModal" data-toggle="modal" data-target="#aboutModal">About</a></li>
          </ul>
        </div><!--/.nav-collapse -->
      </div>
    </nav>

    <!-- Page Content -->
    <div class="container">
        <div class="row">
            <div class="col-md-6">            	
            	<div class="row">
					<div id="sv">
						<div id="sv-map" style="height: 300px; width: 100%"></div>
					</div>
				</div>
				<div class="row">
					<div id="Table">
						<br>
						<table class="table table-striped table-bordered table-condensed">
						  <thead>
						    <tr>
						      <th data-sortable="true">Crash</th>
						      <th data-sortable="true">Date and time</th>						      
						      <th data-sortable="true">Description</th>	
						      <th data-sortable="true">Severity</th>
						      <th>Location</th>
						    </tr>
						  </thead>
						  <tbody id="loadHere">
						  </tbody>
						</table>
					</div>
				</div>
			</div>
            <!-- Blog Sidebar Widgets Column -->
            <div class="col-lg-6">
        		<div id="map"></div>
            </div>
        </div>
        <!-- /.row -->

        <div class="modal fade" id="aboutModal">
		  <div class="modal-dialog">
		    <div class="modal-content">
		      <div class="modal-header">
		        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
		        <h4 class="modal-title">ViCrash - a map by Alex Leith</h4>
		      </div>
		      <div class="modal-body">
		        <div class="well">
		        	<h2>Why</h2>
            		<p>Big lists of crashes are difficult to turn into something to make decision upon. When we map crashes, and present relationships between near crashes, such as listing other nearby crashes, we can start to understand a bit more about the context of a single crash. Being able to view the crash site enables exploration of <i>why</i> an accident might have occurred. Exploring this data in context could allow for more targeted capital investment, ultimately making the roads safer for us all.</p>
            		<h2>What</h2>
            		<p>Data was sourced from <a href="http://vicroadsopendata.vicroadsmaps.opendata.arcgis.com/">VicRoads</a>, massaged in <a href="http://postgis.net/">PostGIS</a> and when it was determined that it would be too big to run client-side, it was loaded into <a href="http://cartodb.com/">CartoDB</a>. CartoDB's version of <a href="http://leafletjs.com">Leaflet</a> is used, as well as <a href="http://google.com">Google's</a> API. (Yep, that's right, this map use two mapping APIs!)
            		<h2>How</h2>
            		<p><b>Zoom into the map to start seeing individual accidents.</b></p>
            		<ul>
            			<li>When you're zoomed out, you can view a density map, showing relative numbers of crashes in an area.</li>
            			<li>When you're zoomed in, you can start to see actual accident locations, and these are coloured by severity.</li>
            			<li>Clicking on a crash delivers more information, such as what type of vehicle was involved and the date.</li>
            			<li>Also, when you have clicked on one crash, the map will list 10 crashes that are within 250 m of the crash, ordered by distance.</li>
            			<li>Crashes can be explored in terms of detail, but also in context with the Google StreetView image.</li>
            			<li>Crashes can be linked through from StreetView or from the table, not just from the map.</li>
            		</ul>
            	</div>
		      </div>
		      <div class="modal-footer">
		        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
		      </div>
		    </div><!-- /.modal-content -->
		  </div><!-- /.modal-dialog -->
		</div><!-- /.modal -->

        <!-- Footer -->
       <footer>
            <div class="row">
                <div class="col-lg-12">
                    <p>Produced by <a href="http://agl.pw">Alex Leith</a>, data from <a href="http://vicroadsopendata.vicroadsmaps.opendata.arcgis.com/">VicRoads</a>.</p>
                </div>
            </div>
            <!-- /.row -->
        </footer>
    </div>
    <!-- /.container -->

    <!-- jQuery -->
    <script src="js/jquery-1.11.2.min.js"></script>

	<!-- Leaflet 
	<link rel="stylesheet" href="css/leaflet.css" />
	<script src="js/leaflet.js"></script>
	-->
	<!-- include cartodb.js library -->
    <script src="http://libs.cartocdn.com/cartodb.js/v3/cartodb.js"></script>

	<!-- Marker Clusters -->
	<link rel="stylesheet" href="css/MarkerCluster.css" />
	<link rel="stylesheet" href="css/MarkerCluster.Default.css" />
	<script src="js/leaflet.markercluster.js"></script>

	<!-- Latest compiled and minified CSS -->
	<link rel="stylesheet" href="css/bootstrap.min.css">

	<!-- Latest compiled and minified JavaScript -->
	<script src="js/bootstrap.min.js"></script>
	<script type='text/javascript' src="js/bootstrap-slider.min.js"></script>
	<script src="https://maps.googleapis.com/maps/api/js"></script>

    <script src="js/map.js"></script>
	    
</body>
</html>